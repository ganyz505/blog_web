<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ganyzpro的Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="This is a blog.">
    
    <link rel="preload" href="/blog_web/assets/css/0.styles.18b9dbef.css" as="style"><link rel="preload" href="/blog_web/assets/js/app.3789181b.js" as="script"><link rel="preload" href="/blog_web/assets/js/2.172aba56.js" as="script"><link rel="preload" href="/blog_web/assets/js/15.0c682d46.js" as="script"><link rel="prefetch" href="/blog_web/assets/js/10.e0740110.js"><link rel="prefetch" href="/blog_web/assets/js/11.aac3eca1.js"><link rel="prefetch" href="/blog_web/assets/js/12.15e79a79.js"><link rel="prefetch" href="/blog_web/assets/js/13.11e8e06f.js"><link rel="prefetch" href="/blog_web/assets/js/14.80b419b0.js"><link rel="prefetch" href="/blog_web/assets/js/3.e0a7d648.js"><link rel="prefetch" href="/blog_web/assets/js/4.c999fad4.js"><link rel="prefetch" href="/blog_web/assets/js/5.d83fd23f.js"><link rel="prefetch" href="/blog_web/assets/js/6.95c151eb.js"><link rel="prefetch" href="/blog_web/assets/js/7.49f59be6.js"><link rel="prefetch" href="/blog_web/assets/js/8.afdb8787.js"><link rel="prefetch" href="/blog_web/assets/js/9.223f6ab7.js">
    <link rel="stylesheet" href="/blog_web/assets/css/0.styles.18b9dbef.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog_web/" class="home-link router-link-active"><!----> <span class="site-name">ganyzpro的Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog_web/web/" class="nav-link router-link-active">
  Web
</a></div><div class="nav-item"><a href="/blog_web/other/" class="nav-link">
  进阶
</a></div><div class="nav-item"><a href="/blog_web/dataStru/" class="nav-link">
  数据结构
</a></div><div class="nav-item"><a href="https://github.com/ganyzpro/blog_web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog_web/web/" class="nav-link router-link-active">
  Web
</a></div><div class="nav-item"><a href="/blog_web/other/" class="nav-link">
  进阶
</a></div><div class="nav-item"><a href="/blog_web/dataStru/" class="nav-link">
  数据结构
</a></div><div class="nav-item"><a href="https://github.com/ganyzpro/blog_web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog_web/web/base/js.html" aria-current="page" class="active sidebar-link">js基础</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>js系统
1、数据类型、类型检测转换、拷贝
2、执行上下文、闭包、this指向
3、原型链、继承
4、事件循环
6、V8、内存机制、GC回收机制
7、DOM事件，事件捕获冒泡委托等
8、异步编程
9、webpack</p> <p>1、类型检测。typeof返回类型字符串，可以检测原始类型，引用类型除了函数function都是object。null返回object是bug。instanceof返回布尔值，判断一个对象是不是另一个的实例，用来判断引用类型。Boolean, Number和String基本包装对象。
var str1 = 'hello world'
str1 instanceof String // false</p> <p>var str2 = new String('hello world')
str2 instanceof String // true</p> <p>类型转换。if()和==会隐式转换，最后转为数字进行比较。==和===，先判断类型是否相同。Object.is(a,b)判断两个值是否相等，在===的基础上修复了+0和-0（false）及NaN和NaN（true）。</p> <p>赋值、深浅拷贝。赋址（将一个对象类型的赋给变量）是复制变量指向的地址，基本类型的值改变也会跟着变；浅拷贝拷贝了第一层，基本类型不会跟着变，引用类型还是只复制了引用地址。常用的有assign(),展开...,数组的slice()等。单=的意思是创建或修改变量在内存中的指向。参数传值，传引用类型时是将形参指向实参相同的地址。</p> <p>js两大链！作用域链和原型链。
2、首先js是词法作用域（静态作用域），函数的作用域在函数定义的时候就决定了。查找变量按函数定义的位置通过作用域链查找。
js里的可执行代码无非就是全局代码，函数代码，eval代码。主要关注函数代码。执行一个函数的时候会先进行准备工作，创建执行上下文，然后才执行。
执行上下文存储在执行栈中，LIFO后进先出。首先全局执行上下文被压入执行上下文栈中，初始化一个全局执行上下文栈。所有的函数执行上下文都包在全局执行上下文中，不同函数的调用会不断的压栈弹栈。当一个函数中又调用了另外的函数，则继续压栈，以此类推。</p> <p>创建阶段（1）绑定this（2）创建词法环境（3）创建变量环境。ES6中，词法环境存储函数声明和变量（let const）绑定，变量环境用于存储变量（var）绑定。词法环境分全局环境和函数环境。
变量对象存储了上下文中定义的函数和变量声明。变量对象的创建过程：
全局上下文的变量对象初始化是全局对象
函数上下文的变量对象初始化只包括 Arguments 对象（表示传入的参数）
在进入执行上下文时会给变量对象添加形参、函数声明、变量声明等初始的属性值
在代码执行阶段，会再次修改变量对象的属性值</p> <p>函数内有一个scope属性，用于保存所有的父变量对象。当前函数激活时将自己的活动变量对象添加到scope作用域链的前端，形成完整作用域链。每一个子函数都会拷贝上级的作用域，形成一个作用域的链条。
checkscopeContext = {
AO: {
arguments: {
length: 0
},
scope: undefined,
f: reference to function f(){}
},
Scope: [AO, globalContext.VO],
this: undefined
}
VO变量对象全局，AO活动对象函数上下文。</p> <p>变量对象&gt;执行上下文&gt;执行栈&gt;执行</p> <p>变量、函数提升。变量只是声明提升，值是undefine。函数提升整个提升，有多个同名函数声明时后面的会覆盖。函数会全部提升上去，变量提升声明后执行到赋值操作会重新赋值。function定义函数和var func = function(){}表达式定义是不同的。</p> <p>闭包是一个函数，可以访问另外一个函数作用域中的变量的函数。MDN 对闭包的定义为：闭包是指那些能够访问自由变量的函数。自由变量，既不是参数也不是函数内的局部变量。正常来说一个普通函数内定义的局部变量，在函数执行完之后就会被内存回收，但是通过闭包的方式不会还可以获取到他的值。通常我们说的闭包即一个函数作为父函数的返回值，这个函数引用了父函数作用域中的变量。</p> <p>this（动态，执行时确定）
全局上下文和直接调用函数（函数表达式赋值再调用），window/undefined
dom事件绑定中指向dom
对象.方法，指向对象
new构造函数，指向实例对象
箭头函数的 this 始终指向函数定义时的 this，而非执行时。箭头函数中没有 this 绑定，必须通过查找作用域链来决定其值，如果箭头函数被非箭头函数包含，则 this 绑定的是最近一层非箭头函数的 this，否则，this为 window。</p> <p>3、通过_proto_实现原型链继承。
每个对象拥有一个原型对象，通过 __proto__指针指向上一个原型 ，并从中继承方法和属性，同时原型对象也可能拥有原型，这样一层一层，最终指向null。这种关系被称为原型链 (prototype chain)，通过原型链一个对象会拥有定义在其他对象中的属性和方法。</p> <p>Person.prototype.constructor === Person
原型对象有一个constructor属性，定义了一个构造函数，原型对象创建对象时调用这个构造函数。
Person.prototype.constructor === person.constructor  //true
当获取person.constructor时，其实person中并没有constructor属性,当不能读取到constructor属性时，会从 person 的原型也就是Person.prototype中读取，正好原型中有该属性</p> <p>ES6的class和extend语法糖。</p> <p>4、事件循环event Loop
宏任务和微任务。宏任务包括js脚本，setTimeout等延时任务。微任务有promise.then()等。先执行宏任务，再执行宏任务里的微任务。</p> <p>6、栈，堆。内存回收（标记清除）。局部作用域的变量，函数执行完后就被回收了。闭包还可以通过作用域链访问到。
编译器 编译得到二进制文件机器码
解释器 将ast转成字节码
v8既有解释器也有编译器，两者结合，即时编译。</p> <p>7.域名dns解析得到ip，请求服务器时涉及缓存。协商缓存last-modified强制缓存cache-control。小js，图片缓存在memory内存，css，大文件在dist磁盘。请求html后，解析css先引入，js放在尾部。js串行。得到文件后渲染涉及重绘和重排。</p> <p>8.setTimeout延时函数
callback，通过往函数最后一个参数传入回调函数的方式。嵌套问题。
promise，链式调用。
async返回promise。</p> <p>9、在前端工程化开发中，有各种模块的import、export，webpack模块打包工具根据依赖关系将模块打包成相应的bundle。一般涉及babel将ES6转为ES5，生成依赖图谱（一个对象），最后打包生成浏览器可执行的一个js文件。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/21/2021, 11:36:50 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog_web/assets/js/app.3789181b.js" defer></script><script src="/blog_web/assets/js/2.172aba56.js" defer></script><script src="/blog_web/assets/js/15.0c682d46.js" defer></script>
  </body>
</html>
